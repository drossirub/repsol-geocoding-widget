System.register(["jimu-core","jimu-ui","jimu-core/react","calcite-components"],(function(e,t){var a={},r={},o={},l={};return{setters:[function(e){a.FormattedMessage=e.FormattedMessage,a.React=e.React,a.jsx=e.jsx},function(e){r.Button=e.Button,r.Col=e.Col,r.Container=e.Container,r.Modal=e.Modal,r.ModalBody=e.ModalBody,r.ModalFooter=e.ModalFooter,r.ModalHeader=e.ModalHeader,r.Pagination=e.Pagination,r.Row=e.Row,r.Select=e.Select,r.Table=e.Table,r.TextInput=e.TextInput,r.Tooltip=e.Tooltip},function(e){o.cloneElement=e.cloneElement,o.useState=e.useState},function(e){l.CalciteIcon=e.CalciteIcon}],execute:function(){e((()=>{var e={9037:e=>{"use strict";e.exports=l},9244:e=>{"use strict";e.exports=a},8972:e=>{"use strict";e.exports=o},4321:e=>{"use strict";e.exports=r}},t={};function i(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,i),o.exports}i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var s={};return i.p=window.jimuConfig.baseUrl,(()=>{"use strict";i.r(s),i.d(s,{__set_webpack_public_path__:()=>g,default:()=>f});var e=i(9244);const t={rowsPerPage:6};var a=i(4321),r=i(8972);const o=["file_name","description"],l=t=>{const{className:l="",columns:i,rowsPerPage:s,data:c,widgetProps:n}=t,[d,u]=e.React.useState(1),[p,m]=e.React.useState(s),_=Math.ceil(c.length/p),f=(d-1)*p,g=f+p,v=c.slice(f,g),x=(t,l,s)=>{const c=s.field,n=void 0!==t[c]&&null!==t[c]?t[c]:"",d=i.find((e=>e.field==c)),u=d.icon?(0,r.cloneElement)(d.icon,{}):null;return e.React.createElement("td",{key:l,className:"text-truncate p-1"+(u?" text-center":""),style:{maxWidth:"10rem"}},o.includes(c)?e.React.createElement(a.Tooltip,{title:n,placement:"top",followCursor:!0},u||e.React.createElement("a",null,n)):u||e.React.createElement("a",null,n))};return e.React.createElement("div",{className:"table-component h-100 w-100 "+l},e.React.createElement(a.Container,{fluid:!0,className:"h-100 w-100"},e.React.createElement(a.Row,{style:{overflowY:"auto",maxHeight:"220px",height:"100%"}},e.React.createElement(a.Table,{bordered:!0,size:"sm",striped:!0},e.React.createElement("thead",{style:{backgroundColor:n.theme.colors.primary,color:n.theme.colors.white,top:0,left:0,zIndex:2,position:"sticky"}},e.React.createElement("tr",null,i.map((t=>e.React.createElement("th",{style:{width:t.icon?"3%":o.includes(t.field)?"17%":"auto"},className:"p-1",scope:"column",key:t.field},t.icon?"":t.label))))),e.React.createElement("tbody",null,v.map(((t,a)=>e.React.createElement("tr",{key:a},i.map(((e,a)=>x(t,a,e))))))))),e.React.createElement(a.Row,{className:"d-flex justify-content-between align-self-end"},e.React.createElement(a.Col,null,e.React.createElement(a.Pagination,{boundaryCount:1,defaultCurrent:1,pageSize:p,defaultPageSize:s,totalPage:_,pageSizeOptions:[5,10,20],onChangePage:e=>{u(e)},onPageSizeChange:e=>{m(e),u(1)},shape:"rounded",siblingCount:1,size:"default",variant:"outlined"})),e.React.createElement(a.Col,null,t.children))))},c={field_order_code:"Codigo Pedido",field_file_name:"Nombre Fichero",field_type:"Tipo",field_rows_to_process:"Filas procesar",field_description:"Descripcion",field_status:"Estado",field_request_date:"Fecha Solicitud",field_completion_date:"Fecha Fin",field_view_data:"",field_error_log:"",field_download:"",field_delete:"",button_add_order:"A\xf1adir pedido",button_refresh:"Refrescar",drop_files_here:"Arrastra y suelta tus archivos aqu\xed",drop_files_active:"Suelta los archivos aqu\xed...",button_select_files:"Seleccionar Archivos",text_max_files:"Tama\xf1o m\xe1ximo: {maxFileSize} MB",alert_file_not_accepted:"Archivo no aceptado o excede {maxFileSize} MB.",text_selected_files:"Archivos seleccionados:",text_file_details:"{fileName} - {fileSize} MB"};var n=i(9037);const d=[{defaultMessage:"field_order_code",field:"order_code"},{defaultMessage:"field_file_name",field:"file_name"},{defaultMessage:"field_type",field:"type"},{defaultMessage:"field_rows_to_process",field:"rows_to_process"},{defaultMessage:"field_description",field:"description"},{defaultMessage:"field_status",field:"status"},{defaultMessage:"field_request_date",field:"request_date"},{defaultMessage:"field_completion_date",field:"completion_date"},{defaultMessage:"field_error_log",field:"error_log",icon:e.React.createElement(n.CalciteIcon,{icon:"search",scale:"s"}," ")},{defaultMessage:"field_view_data",field:"view_data",icon:e.React.createElement(n.CalciteIcon,{icon:"properties",scale:"s"}," ")},{defaultMessage:"field_download",field:"download",icon:e.React.createElement(n.CalciteIcon,{icon:"save",scale:"s"}," ")},{defaultMessage:"field_delete",field:"delete",icon:e.React.createElement(n.CalciteIcon,{icon:"trash",scale:"s"}," ")}],u=[{order_code:"001",file_name:"Archivo1.xlsx",type:"Directa",rows_to_process:"150",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin eu ante a augue sollicitudin ultricies. Donec eget dolor sem. Nulla tincidunt urna et ante pretium consequat. Pellentesque mattis at lacus quis vehicula. Quisque varius tristique diam quis fringilla. Pellentesque tincidunt finibus dolor. Etiam quis neque magna. Vestibulum venenatis lorem metus, quis posuere nisl consequat eu. Ut in libero in nulla congue cursus. Mauris lacus risus, laoreet in hendrerit sed, pulvinar quis mi. Morbi sit amet turpis nisi. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam efficitur posuere congue. Duis lorem quam, pharetra commodo mauris in, pretium molestie nisl. Ut finibus suscipit nisi.",status:"Pendiente",request_date:"2024-12-10",completion_date:"",error_log:""},{order_code:"019",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"002",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"003",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"004",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"005",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"006",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"007",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"008",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"009",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"010",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"011",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"012",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"013",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"014",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"015",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"016",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"017",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."},{order_code:"018",file_name:"Archivo2.xlsx",type:"Inversa",rows_to_process:"200",description:"Descripci\xf3n de prueba 2",status:"Finalizado",request_date:"2024-12-09",completion_date:"2024-12-10",error_log:"Error al procesar coordenadas."}],p=({onFileAccepted:t,widgetProps:o,accept:l=["*"],maxFiles:i=1})=>{const[s,n]=(0,r.useState)(!1),[d,u]=(0,r.useState)([]),p=e=>{const a=(e=>e.filter((e=>(l.includes("*")||l.some((t=>e.type.includes(t))))&&e.size/1048576<=50)))(e),r=a.slice(0,i);if(r.length>0)u(r),t(r);else{const e=o.intl.formatMessage({id:"text_max_files",defaultMessage:c.text_max_files}).replace("{maxFileSize}",50..toString());alert(e)}};return(0,e.jsx)("div",{onDragOver:e=>{e.preventDefault(),n(!0)},onDragLeave:e=>{e.preventDefault(),n(!1)},onDrop:e=>{e.preventDefault(),n(!1);const t=Array.from(e.dataTransfer.files);p(t)},style:{position:"relative",display:"flex",aspectRatio:"1",backgroundColor:s?o.theme.colors.secondary:o.theme.colors.white,border:`2px dashed ${o.theme.colors.primary}`,borderRadius:"8px",padding:"12px",cursor:"pointer",textAlign:"center",alignItems:"center",justifyContent:"center",height:"inherit",width:"100%"}},(0,e.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"}},(0,e.jsx)("h1",{style:{fontSize:"16px",color:"#333",margin:"0 0 12px 0"}},s?o.intl.formatMessage({id:"drop_files_here",defaultMessage:c.drop_files_here}):o.intl.formatMessage({id:"drop_files_active",defaultMessage:c.drop_files_active})),(0,e.jsx)(a.Button,{hidden:s,size:"sm",style:{marginBottom:"12px"},onClick:()=>{var e;return null===(e=document.getElementById("file-input"))||void 0===e?void 0:e.click()}},(0,e.jsx)(e.FormattedMessage,{id:"button_select_files",defaultMessage:c.button_select_files})),(0,e.jsx)("input",{id:"file-input",type:"file",multiple:i>1,accept:l.join(","),style:{display:"none"},onChange:e=>{const t=Array.from(e.target.files||[]);p(t)}}),(0,e.jsx)("p",{style:{fontSize:"14px",color:"#555"}},o.intl.formatMessage({id:"text_max_files",defaultMessage:c.text_max_files}).replace("{maxFiles}",i.toString()).replace("{maxFileSize}",50..toString()))),d.length>0&&(0,e.jsx)("div",{style:{position:"absolute",bottom:"10px",left:"10px",right:"10px",background:"#fff",border:"1px solid #ddd",borderRadius:"8px",padding:"10px",maxHeight:"100px",overflowY:"auto"}},(0,e.jsx)("p",{style:{fontWeight:"bold",fontSize:"14px",margin:"0 0 8px 0"}},(0,e.jsx)(e.FormattedMessage,{id:"text_selected_files",defaultMessage:c.text_selected_files})),(0,e.jsx)("ul",{style:{padding:"0",margin:"0",listStyle:"none"}},(()=>{const t=o.intl.formatMessage({id:"text_file_details",defaultMessage:c.text_file_details});return d.map(((a,r)=>{let l=t.replace("{fileName}",a.name);return l=l.replace("{fileSize}",(a.size/1048576).toFixed(2)),(0,e.jsx)("li",{key:r,style:{fontSize:"14px",color:o.theme.typography.colors.caption||"gray"}},l)}))})())))},m={type:"direct",description:""},_=({isOpen:t,onClose:o,onSubmit:l,fileName:i})=>{const[s,c]=(0,r.useState)(1),[n,d]=(0,r.useState)(["Columna1","Columna2"]),[u,p]=(0,r.useState)(m),_=()=>{p(m),c(1),o()},f=(e,t)=>{p(Object.assign(Object.assign({},u),{[e]:t}))};return e.React.createElement(a.Modal,{isOpen:t,toggle:_,size:"lg"},e.React.createElement(a.ModalHeader,{toggle:_},1===s?"A\xf1adir Pedido - Selecci\xf3n B\xe1sica":"A\xf1adir Pedido - Detalles"),e.React.createElement(a.ModalBody,null,1===s&&e.React.createElement("div",null,e.React.createElement("p",null,"Archivo seleccionado: ",e.React.createElement("strong",null,i)),e.React.createElement("p",null,"Seleccione el tipo de geocodificaci\xf3n:"),e.React.createElement(a.Select,{value:u.type,onChange:e=>f("type",e.target.value)},e.React.createElement("option",{value:"direct"},"Geocodificaci\xf3n Directa"),e.React.createElement("option",{value:"reverse"},"Geocodificaci\xf3n Inversa"))),2===s&&e.React.createElement("div",null,"direct"===u.type&&e.React.createElement("div",null,e.React.createElement("div",null,e.React.createElement("h1",null,"Geolocalizaci\xf3n Directa")),e.React.createElement("div",null,e.React.createElement("p",null,"Las columnas del fichero seleccionado se muestran en la siguiente lista. ",e.React.createElement("br",null),"Seleccione la columna que contiene la direcci\xf3n a geolocalizar."),e.React.createElement("div",{className:"d-flex align-items-center"},"Columna direcci\xf3n:",e.React.createElement("div",{className:"overflow-hidden flex-grow-1 ml-5"},e.React.createElement(a.Select,{value:u.column,onChange:e=>f("column",e.target.value)},n.map((t=>e.React.createElement("option",{key:t,value:t},e.React.createElement("div",{className:"text-truncate"},t))))))))),"reverse"===u.type&&e.React.createElement("div",null,e.React.createElement("p",null,"Seleccione las columnas de coordenadas:"),e.React.createElement("div",null,e.React.createElement("label",null,"Coordenada X:"),e.React.createElement(a.Select,{value:u.coordX,onChange:e=>f("coordX",e.target.value)},n.map((t=>e.React.createElement("option",{key:t,value:t},t))))),e.React.createElement("div",null,e.React.createElement("label",null,"Coordenada Y:"),e.React.createElement(a.Select,{value:u.coordY,onChange:e=>f("coordY",e.target.value)},n.map((t=>e.React.createElement("option",{key:t,value:t},t))))),e.React.createElement("div",null,e.React.createElement("label",null,"Sistema de Referencia:"),e.React.createElement(a.TextInput,{value:u.referenceSystem||"",onChange:e=>f("referenceSystem",e.target.value)}))),e.React.createElement("div",null,e.React.createElement("label",null,"Descripci\xf3n:"),e.React.createElement(a.TextInput,{value:u.description,onChange:e=>f("description",e.target.value)})))),e.React.createElement(a.ModalFooter,null,s>1&&e.React.createElement(a.Button,{onClick:()=>{s>1&&c(s-1)}},"Atr\xe1s"),e.React.createElement(a.Button,{type:"primary",onClick:()=>{if(1===s){if(!u.type)return void alert("Seleccione el tipo de geocodificaci\xf3n.")}else if(2===s){if("direct"===u.type&&!u.column)return void alert("Seleccione la columna de direcciones.");if(!("reverse"!==u.type||u.coordX&&u.coordY&&u.referenceSystem))return void alert("Complete todos los campos para la geocodificaci\xf3n inversa.")}s<2?c(s+1):(l(u),o())}},2===s?"A\xf1adir":"Siguiente")))},f=o=>{var i;const{config:s}=o,[n,m]=(0,r.useState)([]),[f,g]=(0,r.useState)([]),[v,x]=(0,r.useState)(!1),y=(null===(i=null==s?void 0:s.gridConfig)||void 0===i?void 0:i.rowsPerPage)||t.rowsPerPage,E=d.map((e=>({label:o.intl.formatMessage({id:e.defaultMessage,defaultMessage:c[e.defaultMessage]}),field:e.field,icon:e.icon})));return console.log("Columns:",E),console.log("Data:",n),console.log({props:o}),e.React.createElement("div",{className:"widget-geocode h-100"},n&&n.length>0?e.React.createElement(l,{widgetProps:o,className:"h-100",columns:E,data:n,rowsPerPage:y},e.React.createElement("div",{className:"d-flex justify-content-end"},e.React.createElement(a.Button,{style:{marginRight:"8px",marginTop:"8px"}},e.React.createElement(e.FormattedMessage,{id:"button_refresh",defaultMessage:c.button_refresh})),e.React.createElement(a.Button,{type:"primary",style:{marginTop:"8px"}},e.React.createElement(e.FormattedMessage,{id:"button_add_order",defaultMessage:c.button_add_order})))):e.React.createElement(p,{widgetProps:o,onFileAccepted:e=>{g(e),x(!0)}}),e.React.createElement(_,{isOpen:v,onClose:()=>{x(!1)},onSubmit:e=>{console.log({data:e}),m(u),x(!1)},fileName:""}))};function g(e){i.p=e}})(),s})())}}}));